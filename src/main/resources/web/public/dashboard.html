<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en" class="all">
  <head>
    <title>Basic - PatternFly</title>
<meta charset="UTF-8"/>
<script 
		th:src="@{https://cdnjs.cloudflare.com/ajax/libs/c3/0.4.10/c3.min.js}" type="text/javascript"></script>
		
<script 
		th:src="@{https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.0/d3.min.js}" type="text/javascript"></script>
<script 
		th:src="@{https://ajax.googleapis.com/ajax/libs/jquery/2.2.2/jquery.min.js}" type="text/javascript"></script>
<script 
		th:src="@{https://cdn.datatables.net/1.10.7/js/jquery.dataTables.min.js}" type="text/javascript"></script>
<script 
		th:src="@{https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js}" type="text/javascript"></script>
<link 	th:href="@{https://rawgit.com/patternfly/patternfly/master/dist/css/patternfly.min.css}"
		
		rel="stylesheet" media="screen"/>
<link 	th:href="@{https://rawgit.com/patternfly/patternfly/master/dist/css/patternfly-additions.min.css}"
		
		rel="stylesheet" media="screen" />
		
		
			

		

		
<script 
		th:src="@{https://rawgit.com/patternfly/patternfly/master/dist/js/patternfly.min.js}" type="text/javascript"></script>
		
  </head>
  <body class="cards-pf">
   <nav class="navbar navbar-default navbar-pf" role="navigation">
      <div class="navbar-header">
      
        <a class="navbar-brand" href="research.html">
             Formally Known As Team Six  Ice Cream Manager
            
            <img src="easymozaLR.jpg" style="position: absolute; top: 0; right: 0; border: 0;"/>
        </a>
      </div>
      <div class="collapse navbar-collapse navbar-collapse-1">
          
        <ul class="nav navbar-nav navbar-primary">
          <li>
            <a th:href="@{/uploadfile}">Upload</a>
          </li>
          <li>
            <a th:href="@{/alter}">Alter</a>
          </li>
          <li>
            <a th:href="@{/inventory}">Inventory</a>
          </li>
        </ul>
      </div>
    </nav> 
    
      <div class="container-fluid container-cards-pf">
          <div class="row row-cards-pf">
           

               <div class="col-sm-12">
                   <label>Entity ID</label>
                   <div id="ei1">
                       <select id="eiCB1" class="combobox form-control">
                            <option value=""></option>
                       </select>
                    </div>
                </div>
          </div>
                        <script>
                                	var urlForEI = '/api/truck/getTruckIds';
                                	
                                	$.ajax({
          	                      	  url: urlForEI,
          	                      	  method: 'GET'
          	                      	}).then(function(data) {
          	                      	  console.log(data);
          	                      	  var dropDown ='<select id="eiCB1" class="combobox form-control"><option value=""></option>';
          	                      	  var node = document.getElementById("ei1");
          	                      	  $.each(data, function(key,value) {
          	                      		  dropDown = dropDown +'<option value="'+value+'">'+value+'</option>';
          	                      	  });
          	                      	  dropDown = dropDown + '</select>';
          	                      	  node.innerHTML = dropDown;
          	                      	$('#eiCB1').combobox();
          	                      	});
                        </script> 
              
           
        
          <br></br>

          
          <div class="row row-cards-pf">
                <div class="col-sm-6">
                    <button class="btn btn-default" onclick="donut()" type="button">&emsp;&emsp;&emsp;&emsp;&emsp;GO&emsp;&emsp;&emsp;&emsp;&emsp;</button>
                  </div>
                 <div class="col-sm-6">
                    <button class="btn btn-default" type="button">&emsp;&emsp;&emsp;&emsp;DOWNLOAD&emsp;&emsp;&emsp;&emsp;</button>
                </div>
            </div>
          <br></br><br></br>
                <div class="card-pf">
                    <div class="card-pf-body">
                        <div class="row row-cards-pf">
                           



                            <div class="col-sm-12">
                            <div class="card-pf card-pf-accented card-pf-aggregate-status">
                                <div class="card-pf">
                                    <div class="card-pf-heading">
                                        <h2 class="card-pf-title">TRUCK ICE CREAMS</h2>
                                    </div>
                                    <div class="card-pf-body">
                                        <div id="donut-set-of-values-to-a-whole"></div>
                                    </div>
                                </div>
                                </div>
                            </div>
                          </div>
                    </div>
              </div>
          
            
            <div class="card-pf card-pf-accented card-pf-aggregate-status">
                <div class="card-pf">
                    <div class="card-pf-body">
                  
						
                  <br></br>
            
                  <div class="row row-cards-pf">
                      <div class="col-sm-6">
                         <label>Pick A Start Day</label>
                          <div class="input-group date"> 
                                <input type="text" class="form-control bootstrap-datepicker" id="21"><span class="input-group-addon"><span class="fa fa-calendar"></span></span></input>

                            </div>
                      </div>
                       <div class="col-sm-6">
                        <label>Pick A End Day</label>
                            <div class="input-group date">
                                <input type="text" class="form-control bootstrap-datepicker" id="22"><span class="input-group-addon"><span class="fa fa-calendar"></span></span></input>
                            </div>
                        </div>
                  </div>
                  

                  <div class="row row-cards-pf">
                        <div class="col-sm-12"><br></br>
                            <button class="btn btn-default" id="bottomB" type="button">&emsp;&emsp;&emsp;&emsp;&emsp;GO&emsp;&emsp;&emsp;&emsp;&emsp;</button>
                          </div>
                         <br></br>
                    </div>
                   </div>
                  </div>
                </div>
            
          
          
         <div class="card-pf card-pf-accented card-pf-aggregate-status">
                <div class="card-pf">
                <div class="card-pf-heading">
                            <h1 class="card-pf-title">RESULT</h1>
                        </div>
                    <div class="card-pf-body">
                        
                        <table class="table table-striped table-bordered" id="bottomTable">
                          
                        </table>
                    </div>
                </div>
          </div>
        </div>

      

      
      <script th:src="@{/webjars/patternfly/2.8.0/components/bootstrap-datepicker/js/bootstrap-datepicker.js}" type="text/javascript"></script>
    <script th:src="@{/webjars/patternfly/2.8.0/components/bootstrap-select/js/bootstrap-select.js}" type="text/javascript"></script>
    <script>
      // Initialize Boostrap-datepicker
      $('.input-group.date').datepicker({
        autoclose: true,
        todayBtn: "linked",
        todayHighlight: true
      });
    </script>
        <script>
      // Initialize Boostrap-datepicker
      $('.input-group.date2').datepicker({
        autoclose: true,
        todayBtn: "linked",
        todayHighlight: true
      });
    </script>
    <script th:src="@{/webjars/patternfly/2.8.0/components/bootstrap-combobox/js/bootstrap-combobox.js}" type="text/javascript"></script>
      <script>
          // Initialize Boostrap-Combobox
          //$('.combobox').combobox();
          $('#etCB1').combobox();
      </script>  

<script>
function donut() {
var c3ChartDefaults = $().c3ChartDefaults();

var donutData = {
  type : 'donut',
  colors: {
    Superman: $.pfPaletteColors.blue,
    Vanilla: $.pfPaletteColors.green,
    Orange: $.pfPaletteColors.orange,
    Chocolate: $.pfPaletteColors.red
  },
  columns: [
    ['Superman', 2],
    ['Vanilla', 2],
    ['Orange', 7],
    ['Chocolate', 12]
  ],
  onclick: function (d, i) { console.log("onclick", d, i); },
  onmouseover: function (d, i) { console.log("onmouseover", d, i); },
  onmouseout: function (d, i) { console.log("onmouseout", d, i); }
};

var donutChartBottomConfig = c3ChartDefaults.getDefaultDonutConfig();
donutChartBottomConfig.bindto = '#donut-set-of-values-to-a-whole';
donutChartBottomConfig.tooltip = {show: true};
donutChartBottomConfig.data = donutData;
donutChartBottomConfig.legend = {
  show: true,
  position: 'bottom'
};
donutChartBottomConfig.size = {
  width: 350,
  height: 240
};
donutChartBottomConfig.tooltip = {
  contents: $().pfDonutTooltipContents
};

var donutChartBottomLegend = c3.generate(donutChartBottomConfig);
$().pfSetDonutChartTitle("#donut-set-of-values-to-a-whole", "23", "Ice Creams");
}
        </script>
<script>
//<![CDATA[
$( "#bottomB" ).click(function() {
	  
		      var bottomStart = $('#21').val();
		      
		      bottomStart = bottomStart.replace("/","-");
		     
		      bottomStart = "2016-" + bottomStart;
		      bottomStart = bottomStart.replace("/2016","");
		      bottomStart = new Date(bottomStart);
		      bottomStart = bottomStart.getTime();
		      var bottomFinish = $('#22').val();
		      bottomFinish = bottomFinish.replace("/","-");
		      bottomFinish = "2016-" + bottomFinish;
		      bottomFinish = bottomFinish.replace("/2016","");
		      bottomFinish = new Date(bottomFinish);
		      bottomFinish = bottomFinish.getTime();
		      console.log(bottomStart);
		      console.log(bottomFinish);
		  	$.ajax({
		  	  url: '/api/metrics/get?&from=0&to=9999999900000',
		  	  method: 'GET'
		  	}).then(function(data) {
		  	  console.log(data);
		  	  var tableDate ='<thead><tr><th>DATE</th><th>TRUCK</th><th>DRIVER</th><th>ROUTE</th></tr></thead><tbody>';
		  	  var node = document.getElementById("bottomTable");
		  	  $.each(data, function(key,value) {
		  		  var x = new Date(this.day);
		  		  x = x.getTime();
		  		console.log(x);
		  		  if(x >= bottomStart){
		  			  if(x <= bottomFinish) {
		  				tableDate = tableDate +'<tr><td>'+this.day+'</td><td>'+this.truck+'</td><td>'+this.driverInstance.driver+'</td><td>'+this.routeInstance.route+'</td></tr>';
		  			  }
		  		  }
		  		
		  	  });
		  	tableDate = tableDate + '</tbody>';
		  	  node.innerHTML = tableDate;
		  	
		  	
});
});
//]]>
</script>

</body>
</html>